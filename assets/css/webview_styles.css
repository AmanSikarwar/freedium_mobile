body {
  background-color: var(--app-surface) !important;
  color: var(--app-on-surface) !important;
}
#header {
  background-color: var(--app-surface) !important;
  color: var(--app-on-surface) !important;
  box-shadow: 0 1px 3px 0 var(--app-shadow), 0 1px 2px -1px var(--app-shadow) !important;
}
#progress {
  background: linear-gradient(
    to right,
    var(--app-primary) var(--scroll),
    transparent 0
  ) !important;
}
a {
  color: var(--app-primary) !important;
}
a.text-green-500,
.text-green-500 {
  color: var(--app-primary) !important;
}
#header a.text-green-500 {
  color: var(--app-primary) !important;
}
nav ul a {
  color: var(--app-on-surface-variant) !important;
}
nav ul a:hover {
  color: var(--app-on-surface) !important;
}
button.bg-green-500,
button.bg-blue-500,
button.bg-blue-800 {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
}
button.bg-green-500:hover,
button.bg-blue-500:hover,
button.bg-blue-800:hover {
  filter: brightness(1.1);
}
button.bg-green-500 a,
.dark button.bg-green-500 a {
  color: var(--app-on-primary) !important;
}
button#openProblemModal {
  background-color: var(--app-error) !important;
  color: var(--app-on-error) !important;
}
button#openProblemModal:hover {
  background-color: var(--app-error-container) !important;
  color: var(--app-on-error-container) !important;
}
button.bg-red-400 {
  background-color: var(--app-error) !important;
  color: var(--app-on-error) !important;
}
button.bg-blue-400 {
  background-color: var(--app-secondary) !important;
  color: var(--app-on-secondary) !important;
}
button.bg-yellow-400 {
  background-color: var(--app-tertiary) !important;
  color: var(--app-on-tertiary) !important;
}
button.bg-gray-300 {
  background-color: var(--app-surface-container-high) !important;
  color: var(--app-on-surface-variant) !important;
}
button.bg-gray-700 {
  background-color: var(--app-surface-variant) !important;
  color: var(--app-on-surface-variant) !important;
}
button.bg-gray-300:hover,
button.bg-gray-700:hover {
  filter: brightness(0.9);
}
button.text-gray-800 {
  color: var(--app-on-surface-variant) !important;
}
#nav-toggle {
  color: var(--app-on-surface-variant) !important;
  border-color: var(--app-outline) !important;
}
#nav-toggle:hover {
  color: var(--app-on-surface) !important;
  border-color: var(--app-primary) !important;
}
.text-gray-900,
.text-gray-800,
.text-black {
  color: var(--app-on-surface) !important;
}
.dark .text-gray-100,
.dark .text-gray-200,
.dark .text-white {
  color: var(--app-on-surface) !important;
}
.text-gray-500,
.text-gray-600 {
  color: var(--app-on-surface-variant) !important;
}
.dark .text-gray-500,
.dark .text-gray-400 {
  color: var(--app-on-surface-variant) !important;
}
.bg-white {
  background-color: var(--app-surface) !important;
}
.dark .bg-gray-800 {
  background-color: var(--app-surface) !important;
}
.dark .bg-gray-600,
.bg-gray-600 {
  background-color: var(--app-surface-container) !important;
}
.text-yellow-500,
.dark .text-yellow-400 {
  color: var(--app-tertiary) !important;
}

/* Error page styling */
.text-gray-700,
.dark .text-gray-200 {
  color: var(--app-on-surface-variant) !important;
}

/* "Oppps!" banner and primary accent boxes */
.bg-green-500 {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
}
.bg-green-500:hover,
.hover\:bg-green-600:hover {
  background-color: var(--app-primary) !important;
  filter: brightness(1.1) !important;
}

/* Emergency transponder code box */
.bg-black {
  background-color: var(--app-inverse-surface) !important;
  color: var(--app-inverse-on-surface) !important;
}
.bg-black .text-white,
.bg-black p {
  color: var(--app-inverse-on-surface) !important;
}

/* Form container styling */
.shadow-md {
  box-shadow: 0 4px 6px -1px var(--app-shadow), 0 2px 4px -2px var(--app-shadow) !important;
}

/* Form input styling */
input[type="text"],
input.focus\:outline-none {
  background-color: var(--app-surface) !important;
  color: var(--app-on-surface) !important;
  border-color: var(--app-outline) !important;
}
input::placeholder {
  color: var(--app-on-surface-variant) !important;
}

/* Red button variants (Patreon, error states) */
.bg-red-500,
button.bg-red-500 {
  background-color: var(--app-error) !important;
  color: var(--app-on-error) !important;
}
.bg-red-500:hover,
.hover\:bg-red-600:hover {
  background-color: var(--app-error) !important;
  filter: brightness(1.1) !important;
}

/* Yellow button variants (Liberapay) */
.bg-yellow-500,
button.bg-yellow-500 {
  background-color: var(--app-tertiary) !important;
  color: var(--app-on-tertiary) !important;
}
.bg-yellow-500:hover,
.hover\:bg-yellow-600:hover {
  background-color: var(--app-tertiary) !important;
  filter: brightness(1.1) !important;
}

/* Gray button variants (Cancel, Close) */
.bg-gray-500,
button.bg-gray-500 {
  background-color: var(--app-surface-variant) !important;
  color: var(--app-on-surface-variant) !important;
}
.bg-gray-500:hover,
.hover\:bg-gray-700:hover {
  background-color: var(--app-surface-variant) !important;
  filter: brightness(0.9) !important;
}
button.bg-gray-600 {
  background-color: var(--app-surface-variant) !important;
  color: var(--app-on-surface-variant) !important;
}

/* Container styling for error pages */
.container {
  background-color: var(--app-surface) !important;
}

/* Rounded box styling */
.rounded-lg,
.rounded-md {
  border-color: var(--app-outline-variant) !important;
}

/* Shadow styling */
.shadow-lg {
  box-shadow: 0 10px 15px -3px var(--app-shadow),
    0 4px 6px -4px var(--app-shadow) !important;
}
.border,
.border-gray-300,
.dark .border-gray-700,
.border-gray-600 {
  border-color: var(--app-outline-variant) !important;
}
/* Code block container styling - aggressive overrides */
pre,
pre.flex,
pre.flex-col,
.flex.flex-col.justify-center.border,
pre[class*="flex"],
pre[class*="border"] {
  background-color: var(--app-surface-container-high) !important;
  border-color: var(--app-outline) !important;
  border-width: 2px !important;
  color: var(--app-on-surface) !important;
  padding: 16px !important;
  border-radius: 8px !important;
  overflow-x: auto !important;
  margin: 1em 0 !important;
}

/* Code element inside pre */
pre code,
pre code.p-2,
pre code[class*="bg-gray"],
code.p-2.bg-gray-100,
code.p-2.overflow-x-auto,
.p-2.bg-gray-100.dark\:bg-gray-900 {
  background-color: var(--app-surface-container-highest) !important;
  color: var(--app-on-surface) !important;
  display: block !important;
  padding: 12px !important;
  border-radius: 4px !important;
}

/* Override any Tailwind/Freedium gray backgrounds */
.bg-gray-100,
.dark\:bg-gray-900,
pre .bg-gray-100,
.dark pre .bg-gray-900 {
  background-color: var(--app-surface-container-highest) !important;
}
p code,
ul code,
li code,
code:not(pre *) {
  background-color: var(--app-surface-container-highest) !important;
  color: var(--app-primary) !important;
  padding: 0.2em 0.4em !important;
  border-radius: 4px !important;
  font-weight: 500 !important;
}
.hljs-copy {
  background-color: var(--app-primary-container) !important;
  color: var(--app-on-primary-container) !important;
  border: 1px solid var(--app-outline) !important;
  border-radius: 4px;
  padding: 4px 8px !important;
  margin: 4px !important;
  font-weight: 600 !important;
  cursor: pointer !important;
}
.hljs-copy:hover {
  background-color: var(--app-primary) !important;
  color: var(--app-on-primary) !important;
  filter: brightness(1.1) !important;
}
.bg-green-100,
.dark .bg-green-800 {
  color: var(--app-on-primary-container) !important;
  background-color: var(--app-primary-container) !important;
  padding: 0.25em 0.5em !important;
  border-radius: 9999px !important;
  font-size: 0.8rem !important;
}
.bg-green-100 span,
.dark .bg-green-800 span {
  color: var(--app-on-primary-container) !important;
}

.modal-content {
  background-color: var(--app-surface-container) !important;
  color: var(--app-on-surface) !important;
}
#problem-description {
  background-color: var(--app-surface-container) !important;
  color: var(--app-on-surface) !important;
  border: 1px solid var(--app-outline) !important;
  border-radius: 4px;
}
#problem-description::placeholder {
  color: var(--app-on-surface-variant) !important;
}
figcaption {
  color: var(--app-on-surface-variant) !important;
}
svg {
  fill: currentColor !important;
}
#openProblemModal svg {
  fill: var(--app-on-error) !important;
}
#darkModeToggle svg {
  fill: var(--app-on-primary) !important;
}
.notification-container > div {
  background-color: var(--app-surface-container-low) !important;
  border-color: var(--app-outline-variant) !important;
  color: var(--app-on-surface) !important;
}
#darkModeToggle {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
  width: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
}

/* Dynamic font size support - Global typography scale */
/* Base font size with Minor Third scale (1.2 ratio) */
:root {
  --font-scale-ratio: 1.2;
}

/* Base body text */
body,
p,
li,
span,
div {
  font-size: calc(var(--app-font-size, 18px) * 1.05) !important;
  line-height: 1.6 !important;
}

/* Heading scale - using Minor Third (1.2) ratio for tighter scale */
h1,
.text-6xl,
.text-5xl {
  font-size: calc(var(--app-font-size, 18px) * 1.6) !important;
  line-height: 1.2 !important;
}

h2,
.text-4xl,
.text-3xl {
  font-size: calc(var(--app-font-size, 18px) * 1.44) !important;
  line-height: 1.25 !important;
}

h3,
.text-2xl {
  font-size: calc(var(--app-font-size, 18px) * 1.3) !important;
  line-height: 1.3 !important;
}

h4,
.text-xl {
  font-size: calc(var(--app-font-size, 18px) * 1.15) !important;
  line-height: 1.35 !important;
}

h5,
.text-lg {
  font-size: calc(var(--app-font-size, 18px) * 1.1) !important;
  line-height: 1.4 !important;
}

h6 {
  font-size: calc(var(--app-font-size, 18px) * 1.05) !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

/* Small text */
.text-sm,
.text-xs,
small,
figcaption {
  font-size: calc(var(--app-font-size, 18px) * 0.85) !important;
  line-height: 1.5 !important;
}

/* Code blocks - slightly smaller */
code,
pre,
.font-mono {
  font-size: calc(var(--app-font-size, 18px) * 0.6) !important;
  line-height: 1.6 !important;
}

/* Button text */
button,
.btn,
input[type="submit"] {
  font-size: calc(var(--app-font-size, 18px) * 0.95) !important;
}

/* Navigation text */
nav a,
nav li {
  font-size: calc(var(--app-font-size, 18px) * 0.95) !important;
}

/* Main content specific overrides (article body) */
.main-content {
  font-size: calc(var(--app-font-size, 18px) * 1.05) !important;
}

.main-content h1 {
  font-size: calc(var(--app-font-size, 18px) * 2) !important;
}

.main-content h2 {
  font-size: calc(var(--app-font-size, 18px) * 1.728) !important;
}

.main-content h3 {
  font-size: calc(var(--app-font-size, 18px) * 1.44) !important;
}

.main-content h4 {
  font-size: calc(var(--app-font-size, 18px) * 1.2) !important;
}

.main-content code,
.main-content pre {
  font-size: calc(var(--app-font-size, 18px) * 0.875) !important;
}

/* Additional code block improvements for main content */
.main-content pre code {
  line-height: 1.6 !important;
}

/* Ensure code blocks are distinguishable from content */
.main-content pre {
  margin: 1.5em 0 !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* Syntax highlighting adjustments for better contrast */
pre .hljs {
  background-color: transparent !important;
}

/* Universal override for all code block related classes */
*[class*="bg-gray-100"],
*[class*="bg-gray-900"],
.p-2[class*="bg-"],
code[class*="bg-"],
pre code[class*="bg-"] {
  background-color: var(--app-surface-container-highest) !important;
  color: var(--app-on-surface) !important;
}

/* Specific overrides for common Freedium patterns */
.overflow-x-auto[class*="bg-gray"],
.p-2.overflow-x-auto {
  background-color: var(--app-surface-container-highest) !important;
}
